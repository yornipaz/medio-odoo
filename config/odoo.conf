[options]
# =============================================================================
# CONFIGURACIÓN BÁSICA
# =============================================================================
admin_passwd = strong_admin_password
db_host = db
db_user = odoo16
db_password = odoo16
db_port = 5432

# =============================================================================
# CONFIGURACIÓN DE ADDONS Y DIRECTORIOS
# =============================================================================
addons_path = /mnt/extra-addons,/usr/lib/python3/dist-packages/odoo/addons
data_dir = /var/lib/odoo

# =============================================================================
# CONFIGURACIÓN CRÍTICA PARA QUEUE_JOB
# =============================================================================
server_wide_modules = base,web,queue_job

# =============================================================================
# CONFIGURACIÓN DEL SERVIDOR WEB - CORREGIDA PARA WEBSOCKETS
# =============================================================================
xmlrpc_port = 8069
# DESHABILITAMOS longpolling_port para evitar conflictos en Docker
# longpolling_port = 8072
#http_interface = 0.0.0.0
proxy_mode = False

# =============================================================================
# CONFIGURACIÓN DE WORKERS - MODO SIN WORKERS PARA EVITAR WEBSOCKET ISSUES
# =============================================================================
workers = 0
max_cron_threads = 1

# =============================================================================
# CONFIGURACIÓN DE MEMORIA Y LÍMITES
# =============================================================================
limit_memory_hard = 2147483648
limit_memory_soft = 1610612736
limit_time_cpu = 600
limit_time_real = 1800
limit_time_real_cron = 3600
limit_request = 8192
db_maxconn = 64

# =============================================================================
# CONFIGURACIÓN DE LOGS
# =============================================================================
log_level = info
log_handler = :INFO
logfile = False
syslog = False

# =============================================================================
# CONFIGURACIÓN DE SEGURIDAD
# =============================================================================
list_db = True
without_demo = True

# =============================================================================
# CONFIGURACIÓN ESPECÍFICA PARA WEBSOCKETS EN DOCKER
# =============================================================================
# Forzar el uso de threading en lugar de gevent para WebSockets
gevent_port = 8072