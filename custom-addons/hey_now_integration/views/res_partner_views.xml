<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <data>
    <record id="res_config_settings_view_chat_provider_config" model="ir.ui.view">
      <field name="name">res.config.settings.view.form.inherit.chat.providers</field>
      <field name="model">res.config.settings</field>
      <field name="inherit_id" ref="base_setup.res_config_settings_view_form" />
      <field name="arch" type="xml">
        <xpath expr="//div[hasclass('settings')]" position="inside">

          <div class="app_settings_block"
            data-string="Chat Omnicanal"
            string="Chat Omnicanal"
            data-key="chat_omnicanal"
            web_icon="hey_now_integration,static/description/icon.png">

            <h2>Configuración de Proveedores de Chat</h2>

            <!-- OPCIÓN 1: Campo Many2many con widget de tags -->
            <!-- <div class="row mt16 o_settings_container">
              <div class="col-12 col-lg-6 o_setting_box">
                <div class="o_setting_left_pane">
                  <field name="chat_provider_ids" widget="many2many_tags"
                    options="{'color_field': 'provider_type', 'no_create': True}"
                    placeholder="Selecciona proveedores..." />
                </div>
              </div>
            </div> -->

            <!-- OPCIÓN 2: Campo Many2many con vista de lista -->

            <div class="col-12">
              <field name="chat_provider_ids" mode="tree" widget="many2many">
                <tree string="Proveedores de Chat" editable="bottom">
                  <field name="name" readonly="1" />
                  <field name="provider_type" readonly="1" />
                  <field name="is_active" />
                  <field name="base_url" readonly="1" />
                  <field name="allowed_channel_ids" widget="many2many_tags" readonly="1" />
                </tree>
              </field>
            </div>


            <!-- Botón para gestionar proveedores -->
            <div class="col-12 mt-3">
              <button name="%(action_chat_provider)d" type="action" class="btn btn-primary"
                string="Gestionar Proveedores" icon="fa-cog" />
            </div>

            <!-- Información adicional -->
            <div class="col-12 mt-2">
              <div class="text-muted">
                <small>
                  <i class="fa fa-info-circle" /> Configura y gestiona los diferentes proveedores de
                  chat para tu sistema omnicanal. </small>
              </div>
            </div>

          </div>
        </xpath>
      </field>
    </record>
  </data>
</odoo>